<form [formGroup] = "loanForm">
  <table>
  <div class="form-group">
    <label>loan name</label>
    <input type="text" formControlName = "loanName">
    <span class="text-danger" *ngIf="loanForm.controls['loanName'].hasError('required') && loanForm.controls['loanName'].touched">Loan Name is Required</span>
    <span class="text-danger" *ngIf="loanForm.controls['loanName'].hasError('minlength') && loanForm.controls['loanName'].touched">Loan Name min lengh is 5 char</span>
  </div>
  <div class="form-group">
    <label>loan type</label>
    <input type = "text" formControlName = "loanType">
  </div>
  <div class="form-group">
    <label>loan Description</label>
    <textarea formControlName = "loanDescription"></textarea>
  </div>
  <br>
<!--
  <div class="form-group" formArrayName = "users">
    <label>users</label>
    <div *ngFor = "let control of loanForm.controls.users['controls']; let i = index">
      <input type="text" [formControlName] = "i">
    </div>
  </div>
-->

  <div class="form-group" formArrayName = "users">
    <label>users</label>
    <div *ngFor = "let control of loanForm.controls.users['controls']; let i = index;" [formGroupName] = "i">
      <input type="text" formControlName = "name">
      <input type="text" formControlName = "age" (blur) = "assignfunct(i)">
      <input type="text" formControlName = "dept">
      <button (click) = "removeuser(i)"> removeuser </button>
    </div>
  </div>

  </table>
  <button (click) = "addLoan()" [disabled] = "!loanForm.valid"> Add loan </button>
  <button (click) = "resetForm()"> resetForm </button>
  <button (click) = "adduser()"> adduser </button>
</form>
